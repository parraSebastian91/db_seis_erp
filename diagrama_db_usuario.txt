
Table "tipo_contacto" {
  "tipo_contacto_id" BIGINT [pk]
  "nombre" VARCHAR(50)
  "descripcion" VARCHAR(50)
}

Table "contacto" {
  "contacto_id" BIGINT [pk, increment]
  "nombre" VARCHAR(50)
  "direccion" VARCHAR(50)
  "celular" VARCHAR(50)
  "correo" VARCHAR(50)
  "redes_sociales" VARCHAR(50)
  "url" VARCHAR(50)
  "imagen_base64" TEXT
  "tipo_contacto_id" BIGINT
}

Table "organizacion" {
  "organizacion_id" BIGINT [pk]
  "razon_social" VARCHAR
  "rut" VARCHAR
  "dv" "CHAR (1)"
  "giro" VARCHAR
  "logo_base64" TEXT
  "contacto_id" BIGINT
}

Table "cuenta_bancaria" {
  "cuenta_id" BIGINT [pk]
  "nombre_titular" VARCHAR
  "banco" VARCHAR
  "numero" VARCHAR
  "correo_contacto" VARCHAR
  "rut_titular" VARCHAR
  "organizacion_id" BIGINT
}

Table "sistema" {
  "sistema_id" BIGINT [pk]
  "nombre" VARCHAR
  "descripcion" VARCHAR
  "activo" BOOLEAN
}

Table "modulo" {
  "modulo_id" BIGINT [pk]
  "nombre" VARCHAR(50)
  "descripcion" VARCHAR(50)
  "activo" BOOLEAN
  "sistema_id" BIGINT
}

Table "organizacion_sistema" {
  "organizacion_id" BIGINT [not null]
  "sistema_id" BIGINT [not null]

  Indexes {
    (organizacion_id, sistema_id) [pk]
  }
}

Table "rol" {
  "rol_id" BIGINT [pk, increment]
  "nombre" VARCHAR
  "descripcion" VARCHAR
}

Table "permiso" {
  "permiso_id" BIGINT [pk, increment]
  "nombre" VARCHAR
  "descripcion" VARCHAR
  "codigo" VARCHAR
  "activo" BOOLEAN [default: TRUE]
}

Table "modulo_permiso" {
  "modulo_id" BIGINT [not null]
  "permiso_id" BIGINT [not null]

  Indexes {
    (modulo_id, permiso_id) [pk]
  }
}

Table "rol_modulo_permiso" {
  "rol_id" BIGINT [not null]
  "modulo_id" BIGINT [not null]
  "permiso_id" BIGINT [not null]

  Indexes {
    (rol_id, modulo_id, permiso_id) [pk]
  }
}

Table "usuario" {
  "usuario_id" BIGINT [pk, increment]
  "username" VARCHAR
  "password_hash" VARCHAR
  "fecha_creacion" DATE
  "activo" BOOLEAN [default: TRUE]
  "fecha_actualizacion" DATE
  "contacto_id" BIGINT
}

Table "usuario_rol" {
  "usuario_id" BIGINT [not null]
  "rol_id" BIGINT [not null]

  Indexes {
    (usuario_id, rol_id) [pk]
  }
}

Table "organizacion_contacto" {
  "contacto_id" BIGINT [not null]
  "organizacion_id" BIGINT [not null]

  Indexes {
    (contacto_id, organizacion_id) [pk]
  }
}


Ref:"tipo_contacto"."tipo_contacto_id" < "contacto"."tipo_contacto_id"

Ref:"contacto"."contacto_id" < "organizacion_contacto"."contacto_id"
Ref:"organizacion"."organizacion_id" < "organizacion_contacto"."organizacion_id"

Ref:"organizacion"."organizacion_id" < "cuenta_bancaria"."organizacion_id"

Ref:"sistema"."sistema_id" < "modulo"."sistema_id"

Ref:"organizacion"."organizacion_id" < "organizacion_sistema"."organizacion_id"

Ref:"sistema"."sistema_id" < "organizacion_sistema"."sistema_id"

Ref:"modulo"."modulo_id" < "modulo_permiso"."modulo_id"

Ref:"permiso"."permiso_id" < "modulo_permiso"."permiso_id"

Ref:"rol"."rol_id" < "rol_modulo_permiso"."rol_id"

Ref:"modulo"."modulo_id" < "rol_modulo_permiso"."modulo_id"

Ref:"permiso"."permiso_id" < "rol_modulo_permiso"."permiso_id"

Ref:"contacto"."contacto_id" < "usuario"."contacto_id"

Ref:"usuario"."usuario_id" < "usuario_rol"."usuario_id"

Ref:"rol"."rol_id" < "usuario_rol"."rol_id"
