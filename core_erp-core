--
-- PostgreSQL database dump
--

-- Dumped from database version 13.21
-- Dumped by pg_dump version 13.21

-- Started on 2025-09-20 13:32:02 -03

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 4 (class 2615 OID 17033)
-- Name: core; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA core;


ALTER SCHEMA core OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 223 (class 1259 OID 17044)
-- Name: contacto; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.contacto (
    contacto_id bigint NOT NULL,
    nombre character varying,
    direccion character varying,
    celular character varying,
    correo character varying,
    redes_sociales character varying,
    url character varying,
    imagen_base64 text,
    tipo_contacto_id bigint
);


ALTER TABLE core.contacto OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 17042)
-- Name: contacto_contacto_id_seq; Type: SEQUENCE; Schema: core; Owner: postgres
--

ALTER TABLE core.contacto ALTER COLUMN contacto_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME core.contacto_contacto_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 225 (class 1259 OID 17060)
-- Name: cuenta_bancaria; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.cuenta_bancaria (
    cuenta_id bigint NOT NULL,
    nombre_titular character varying,
    banco character varying,
    numero character varying,
    correo_contacto character varying,
    rut_titular character varying,
    organizacion_id bigint
);


ALTER TABLE core.cuenta_bancaria OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 17076)
-- Name: modulo; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.modulo (
    modulo_id bigint NOT NULL,
    nombre character varying,
    descripcion character varying,
    activo boolean,
    sistema_id bigint
);


ALTER TABLE core.modulo OWNER TO postgres;

--
-- TOC entry 233 (class 1259 OID 17110)
-- Name: modulo_permiso; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.modulo_permiso (
    modulo_id bigint NOT NULL,
    permiso_id bigint NOT NULL
);


ALTER TABLE core.modulo_permiso OWNER TO postgres;

--
-- TOC entry 224 (class 1259 OID 17052)
-- Name: organizacion; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.organizacion (
    organizacion_id bigint NOT NULL,
    razon_social character varying,
    rut character varying,
    dv character(1),
    giro character varying,
    logo_base64 text,
    contacto_id bigint
);


ALTER TABLE core.organizacion OWNER TO postgres;

--
-- TOC entry 238 (class 1259 OID 17136)
-- Name: organizacion_contacto; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.organizacion_contacto (
    contacto_id bigint NOT NULL,
    organizacion_id bigint NOT NULL
);


ALTER TABLE core.organizacion_contacto OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 17084)
-- Name: organizacion_sistema; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.organizacion_sistema (
    organizacion_id bigint NOT NULL,
    sistema_id bigint NOT NULL
);


ALTER TABLE core.organizacion_sistema OWNER TO postgres;

--
-- TOC entry 232 (class 1259 OID 17101)
-- Name: permiso; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.permiso (
    permiso_id bigint NOT NULL,
    nombre character varying,
    descripcion character varying,
    codigo character varying,
    activo boolean DEFAULT true
);


ALTER TABLE core.permiso OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 17099)
-- Name: permiso_permiso_id_seq; Type: SEQUENCE; Schema: core; Owner: postgres
--

ALTER TABLE core.permiso ALTER COLUMN permiso_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME core.permiso_permiso_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 230 (class 1259 OID 17091)
-- Name: rol; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.rol (
    rol_id bigint NOT NULL,
    nombre character varying,
    descripcion character varying
);


ALTER TABLE core.rol OWNER TO postgres;

--
-- TOC entry 234 (class 1259 OID 17115)
-- Name: rol_modulo_permiso; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.rol_modulo_permiso (
    rol_id bigint NOT NULL,
    modulo_id bigint NOT NULL,
    permiso_id bigint NOT NULL
);


ALTER TABLE core.rol_modulo_permiso OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 17089)
-- Name: rol_rol_id_seq; Type: SEQUENCE; Schema: core; Owner: postgres
--

ALTER TABLE core.rol ALTER COLUMN rol_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME core.rol_rol_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 226 (class 1259 OID 17068)
-- Name: sistema; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.sistema (
    sistema_id bigint NOT NULL,
    nombre character varying,
    descripcion character varying,
    activo boolean
);


ALTER TABLE core.sistema OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 17034)
-- Name: tipo_contacto; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.tipo_contacto (
    tipo_contacto_id bigint NOT NULL,
    nombre character varying,
    descripcion character varying
);


ALTER TABLE core.tipo_contacto OWNER TO postgres;

--
-- TOC entry 236 (class 1259 OID 17122)
-- Name: usuario; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.usuario (
    usuario_id bigint NOT NULL,
    username character varying,
    password_hash character varying,
    fecha_creacion date,
    activo boolean DEFAULT true,
    fecha_actualizacion date,
    contacto_id bigint
);


ALTER TABLE core.usuario OWNER TO postgres;

--
-- TOC entry 237 (class 1259 OID 17131)
-- Name: usuario_rol; Type: TABLE; Schema: core; Owner: postgres
--

CREATE TABLE core.usuario_rol (
    usuario_id bigint NOT NULL,
    rol_id bigint NOT NULL
);


ALTER TABLE core.usuario_rol OWNER TO postgres;

--
-- TOC entry 235 (class 1259 OID 17120)
-- Name: usuario_usuario_id_seq; Type: SEQUENCE; Schema: core; Owner: postgres
--

ALTER TABLE core.usuario ALTER COLUMN usuario_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME core.usuario_usuario_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3302 (class 2606 OID 17051)
-- Name: contacto contacto_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.contacto
    ADD CONSTRAINT contacto_pkey PRIMARY KEY (contacto_id);


--
-- TOC entry 3306 (class 2606 OID 17067)
-- Name: cuenta_bancaria cuenta_bancaria_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.cuenta_bancaria
    ADD CONSTRAINT cuenta_bancaria_pkey PRIMARY KEY (cuenta_id);


--
-- TOC entry 3318 (class 2606 OID 17114)
-- Name: modulo_permiso modulo_permiso_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.modulo_permiso
    ADD CONSTRAINT modulo_permiso_pkey PRIMARY KEY (modulo_id, permiso_id);


--
-- TOC entry 3310 (class 2606 OID 17083)
-- Name: modulo modulo_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.modulo
    ADD CONSTRAINT modulo_pkey PRIMARY KEY (modulo_id);


--
-- TOC entry 3326 (class 2606 OID 17140)
-- Name: organizacion_contacto organizacion_contacto_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.organizacion_contacto
    ADD CONSTRAINT organizacion_contacto_pkey PRIMARY KEY (contacto_id, organizacion_id);


--
-- TOC entry 3304 (class 2606 OID 17059)
-- Name: organizacion organizacion_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.organizacion
    ADD CONSTRAINT organizacion_pkey PRIMARY KEY (organizacion_id);


--
-- TOC entry 3312 (class 2606 OID 17088)
-- Name: organizacion_sistema organizacion_sistema_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.organizacion_sistema
    ADD CONSTRAINT organizacion_sistema_pkey PRIMARY KEY (organizacion_id, sistema_id);


--
-- TOC entry 3316 (class 2606 OID 17109)
-- Name: permiso permiso_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.permiso
    ADD CONSTRAINT permiso_pkey PRIMARY KEY (permiso_id);


--
-- TOC entry 3320 (class 2606 OID 17119)
-- Name: rol_modulo_permiso rol_modulo_permiso_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.rol_modulo_permiso
    ADD CONSTRAINT rol_modulo_permiso_pkey PRIMARY KEY (rol_id, modulo_id, permiso_id);


--
-- TOC entry 3314 (class 2606 OID 17098)
-- Name: rol rol_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.rol
    ADD CONSTRAINT rol_pkey PRIMARY KEY (rol_id);


--
-- TOC entry 3308 (class 2606 OID 17075)
-- Name: sistema sistema_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.sistema
    ADD CONSTRAINT sistema_pkey PRIMARY KEY (sistema_id);


--
-- TOC entry 3300 (class 2606 OID 17041)
-- Name: tipo_contacto tipo_contacto_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.tipo_contacto
    ADD CONSTRAINT tipo_contacto_pkey PRIMARY KEY (tipo_contacto_id);


--
-- TOC entry 3322 (class 2606 OID 17130)
-- Name: usuario usuario_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.usuario
    ADD CONSTRAINT usuario_pkey PRIMARY KEY (usuario_id);


--
-- TOC entry 3324 (class 2606 OID 17135)
-- Name: usuario_rol usuario_rol_pkey; Type: CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.usuario_rol
    ADD CONSTRAINT usuario_rol_pkey PRIMARY KEY (usuario_id, rol_id);


--
-- TOC entry 3327 (class 2606 OID 17141)
-- Name: contacto contacto_tipo_contacto_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.contacto
    ADD CONSTRAINT contacto_tipo_contacto_id_fkey FOREIGN KEY (tipo_contacto_id) REFERENCES core.tipo_contacto(tipo_contacto_id);


--
-- TOC entry 3328 (class 2606 OID 17156)
-- Name: cuenta_bancaria cuenta_bancaria_organizacion_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.cuenta_bancaria
    ADD CONSTRAINT cuenta_bancaria_organizacion_id_fkey FOREIGN KEY (organizacion_id) REFERENCES core.organizacion(organizacion_id);


--
-- TOC entry 3332 (class 2606 OID 17176)
-- Name: modulo_permiso modulo_permiso_modulo_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.modulo_permiso
    ADD CONSTRAINT modulo_permiso_modulo_id_fkey FOREIGN KEY (modulo_id) REFERENCES core.modulo(modulo_id);


--
-- TOC entry 3333 (class 2606 OID 17181)
-- Name: modulo_permiso modulo_permiso_permiso_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.modulo_permiso
    ADD CONSTRAINT modulo_permiso_permiso_id_fkey FOREIGN KEY (permiso_id) REFERENCES core.permiso(permiso_id);


--
-- TOC entry 3329 (class 2606 OID 17161)
-- Name: modulo modulo_sistema_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.modulo
    ADD CONSTRAINT modulo_sistema_id_fkey FOREIGN KEY (sistema_id) REFERENCES core.sistema(sistema_id);


--
-- TOC entry 3340 (class 2606 OID 17146)
-- Name: organizacion_contacto organizacion_contacto_contacto_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.organizacion_contacto
    ADD CONSTRAINT organizacion_contacto_contacto_id_fkey FOREIGN KEY (contacto_id) REFERENCES core.contacto(contacto_id);


--
-- TOC entry 3341 (class 2606 OID 17151)
-- Name: organizacion_contacto organizacion_contacto_organizacion_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.organizacion_contacto
    ADD CONSTRAINT organizacion_contacto_organizacion_id_fkey FOREIGN KEY (organizacion_id) REFERENCES core.organizacion(organizacion_id);


--
-- TOC entry 3330 (class 2606 OID 17166)
-- Name: organizacion_sistema organizacion_sistema_organizacion_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.organizacion_sistema
    ADD CONSTRAINT organizacion_sistema_organizacion_id_fkey FOREIGN KEY (organizacion_id) REFERENCES core.organizacion(organizacion_id);


--
-- TOC entry 3331 (class 2606 OID 17171)
-- Name: organizacion_sistema organizacion_sistema_sistema_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.organizacion_sistema
    ADD CONSTRAINT organizacion_sistema_sistema_id_fkey FOREIGN KEY (sistema_id) REFERENCES core.sistema(sistema_id);


--
-- TOC entry 3335 (class 2606 OID 17191)
-- Name: rol_modulo_permiso rol_modulo_permiso_modulo_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.rol_modulo_permiso
    ADD CONSTRAINT rol_modulo_permiso_modulo_id_fkey FOREIGN KEY (modulo_id) REFERENCES core.modulo(modulo_id);


--
-- TOC entry 3336 (class 2606 OID 17196)
-- Name: rol_modulo_permiso rol_modulo_permiso_permiso_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.rol_modulo_permiso
    ADD CONSTRAINT rol_modulo_permiso_permiso_id_fkey FOREIGN KEY (permiso_id) REFERENCES core.permiso(permiso_id);


--
-- TOC entry 3334 (class 2606 OID 17186)
-- Name: rol_modulo_permiso rol_modulo_permiso_rol_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.rol_modulo_permiso
    ADD CONSTRAINT rol_modulo_permiso_rol_id_fkey FOREIGN KEY (rol_id) REFERENCES core.rol(rol_id);


--
-- TOC entry 3337 (class 2606 OID 17201)
-- Name: usuario usuario_contacto_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.usuario
    ADD CONSTRAINT usuario_contacto_id_fkey FOREIGN KEY (contacto_id) REFERENCES core.contacto(contacto_id);


--
-- TOC entry 3339 (class 2606 OID 17211)
-- Name: usuario_rol usuario_rol_rol_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.usuario_rol
    ADD CONSTRAINT usuario_rol_rol_id_fkey FOREIGN KEY (rol_id) REFERENCES core.rol(rol_id);


--
-- TOC entry 3338 (class 2606 OID 17206)
-- Name: usuario_rol usuario_rol_usuario_id_fkey; Type: FK CONSTRAINT; Schema: core; Owner: postgres
--

ALTER TABLE ONLY core.usuario_rol
    ADD CONSTRAINT usuario_rol_usuario_id_fkey FOREIGN KEY (usuario_id) REFERENCES core.usuario(usuario_id);


-- Completed on 2025-09-20 13:32:02 -03

--
-- PostgreSQL database dump complete
--

